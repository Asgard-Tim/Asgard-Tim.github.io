<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="theme-color" content="#123456"><meta name="generator" content="Hexo 4.2.0"><title>QQ聊天记录分析 QQMsgAnalysis - XJH&#039;s Secret Base</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="XJH&#039;s Secret Base"><meta name="msapplication-TileImage" content="/img/logo.png"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="XJH&#039;s Secret Base"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="144x144" href="/img/logo.png"><meta name="description" content="从PC端QQ中以txt格式导出聊天记录，存为message.txt。 需要安装的库: numpy, seaborn, pandas, wordcloud, tdqm, paddlepaddle, paddlenlp 准备阶段引入包 pandas: 基础数据框架 matplotlib &amp;amp; seaborn: 主要绘图框架 jieba: 中文分词 wordcloud: 词云 paddlenlp:"><meta property="og:type" content="blog"><meta property="og:title" content="QQ聊天记录分析 QQMsgAnalysis"><meta property="og:url" content="http://asgard-tim.github.io/2024/02/11/QQmsganalysis/"><meta property="og:site_name" content="XJH&#039;s Secret Base"><meta property="og:description" content="从PC端QQ中以txt格式导出聊天记录，存为message.txt。 需要安装的库: numpy, seaborn, pandas, wordcloud, tdqm, paddlepaddle, paddlenlp 准备阶段引入包 pandas: 基础数据框架 matplotlib &amp;amp; seaborn: 主要绘图框架 jieba: 中文分词 wordcloud: 词云 paddlenlp:"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://asgard-tim.github.io/images/QQmsganalysis_files/QQmsganalysis_42_0.png"><meta property="article:published_time" content="2024-02-11T14:13:58.000Z"><meta property="article:modified_time" content="2024-02-11T14:24:26.595Z"><meta property="article:author" content="明诚"><meta property="article:tag" content="Python"><meta property="article:tag" content="可视化"><meta property="article:tag" content="数据处理分析"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://asgard-tim.github.io/images/QQmsganalysis_files/QQmsganalysis_42_0.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://asgard-tim.github.io/2024/02/11/QQmsganalysis/"},"headline":"QQ聊天记录分析 QQMsgAnalysis","image":["http://asgard-tim.github.io/images/QQmsganalysis_files/QQmsganalysis_42_0.png"],"datePublished":"2024-02-11T14:13:58.000Z","dateModified":"2024-02-11T14:24:26.595Z","author":{"@type":"Person","name":"明诚"},"publisher":{"@type":"Organization","name":"XJH's Secret Base","logo":{"@type":"ImageObject","url":"http://asgard-tim.github.io/img/title.png"}},"description":"从PC端QQ中以txt格式导出聊天记录，存为message.txt。 需要安装的库: numpy, seaborn, pandas, wordcloud, tdqm, paddlepaddle, paddlenlp 准备阶段引入包 pandas: 基础数据框架 matplotlib &amp; seaborn: 主要绘图框架 jieba: 中文分词 wordcloud: 词云 paddlenlp:"}</script><link rel="canonical" href="http://asgard-tim.github.io/2024/02/11/QQmsganalysis/"><link rel="icon" href="/img/logo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/xt256.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/title.png" alt="XJH&#039;s Secret Base" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">时间轴</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com">GitHub</a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Asgard-Tim"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-02-11T14:13:58.000Z" title="2024/2/11 22:13:58">2024-02-11</time>发表</span><span class="level-item"><time dateTime="2024-02-11T14:24:26.595Z" title="2024/2/11 22:24:26">2024-02-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/About-XJH/">About XJH</a><span> / </span><a class="link-muted" href="/categories/About-XJH/%E6%98%8E%E6%85%B5/">明慵</a></span><span class="level-item">34 分钟读完 (大约5056个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">QQ聊天记录分析 QQMsgAnalysis</h1><div class="content"><p>从PC端QQ中以<code>txt</code>格式导出聊天记录，存为<code>message.txt</code>。</p>
<p>需要安装的库: <code>numpy, seaborn, pandas, wordcloud, tdqm, paddlepaddle, paddlenlp</code></p>
<h2 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h2><h3 id="引入包"><a href="#引入包" class="headerlink" title="引入包"></a>引入包</h3><ul>
<li>pandas: 基础数据框架</li>
<li>matplotlib &amp; seaborn: 主要绘图框架</li>
<li>jieba: 中文分词</li>
<li>wordcloud: 词云</li>
<li>paddlenlp: 情感分析</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> jieba.posseg <span class="keyword">as</span> pseg</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.ticker <span class="keyword">as</span> mticker</span><br><span class="line"><span class="keyword">import</span> matplotlib.transforms <span class="keyword">as</span> mtransforms</span><br><span class="line"><span class="keyword">from</span> matplotlib.colors <span class="keyword">import</span> ListedColormap</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> font_manager <span class="keyword">as</span> fm</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">from</span> paddlenlp <span class="keyword">import</span> Taskflow</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>

<h3 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_messages</span>(<span class="params">input_file, output_file</span>):</span><br><span class="line">    <span class="comment"># 定义CSV文件头部</span></span><br><span class="line">    header = [<span class="string">&quot;LocalId&quot;</span>, <span class="string">&quot;TalkerId&quot;</span>, <span class="string">&quot;Type&quot;</span>, <span class="string">&quot;SubType&quot;</span>, <span class="string">&quot;IsSender&quot;</span>, <span class="string">&quot;CreateTime&quot;</span>, <span class="string">&quot;Status&quot;</span>,</span><br><span class="line">              <span class="string">&quot;StrContent&quot;</span>, <span class="string">&quot;StrTime&quot;</span>, <span class="string">&quot;Remark&quot;</span>, <span class="string">&quot;NickName&quot;</span>, <span class="string">&quot;Sender&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打开输入和输出文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output_file, <span class="string">&#x27;w&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> outfile:</span><br><span class="line">        csv_writer = csv.writer(outfile)</span><br><span class="line">        csv_writer.writerow(header)  <span class="comment"># 写入头部</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 用集合存储姓名</span></span><br><span class="line">        names = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 逐行读取txt文件内容并转换为csv格式</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(input_file, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">            lines = file.readlines()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(lines), <span class="number">3</span>):</span><br><span class="line">                timestamp_and_name = lines[i].strip().split(<span class="string">&#x27; &#x27;</span>, <span class="number">2</span>)</span><br><span class="line">                date_time = timestamp_and_name[<span class="number">0</span>] + <span class="string">&#x27; &#x27;</span> + timestamp_and_name[<span class="number">1</span>]  <span class="comment"># 日期时间</span></span><br><span class="line">                name = timestamp_and_name[<span class="number">2</span>]  <span class="comment"># 姓名（或用户名）</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 根据姓名判断是否在指定范围内，如果不在，则跳过该条消息</span></span><br><span class="line">                <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&quot;王婧怡(清辉)&quot;</span>, <span class="string">&quot;成王败寇。&quot;</span>, <span class="string">&quot;皇后&quot;</span>, <span class="string">&quot;王婧怡&quot;</span>, <span class="string">&quot;世界之巅&quot;</span>, <span class="string">&quot;2558749399&quot;</span>]:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                message = lines[i + <span class="number">1</span>].strip()  <span class="comment"># 消息内容</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 如果消息内容为空，则跳过该条消息</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> message:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 根据消息内容设置Type字段的值</span></span><br><span class="line">                <span class="keyword">if</span> <span class="string">&quot;[图片]&quot;</span> <span class="keyword">in</span> message:</span><br><span class="line">                    type_value = <span class="number">3</span></span><br><span class="line">                <span class="keyword">elif</span> <span class="string">&quot;[表情]&quot;</span> <span class="keyword">in</span> message:</span><br><span class="line">                    type_value = <span class="number">47</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    type_value = <span class="number">1</span>  <span class="comment"># 默认为1</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 根据姓名设置IsSender字段的值</span></span><br><span class="line">                <span class="keyword">if</span> name <span class="keyword">in</span> [<span class="string">&quot;王婧怡(清辉)&quot;</span>, <span class="string">&quot;成王败寇。&quot;</span>, <span class="string">&quot;皇后&quot;</span>, <span class="string">&quot;王婧怡&quot;</span>]:</span><br><span class="line">                    is_sender = <span class="number">0</span></span><br><span class="line">                <span class="keyword">elif</span> name <span class="keyword">in</span> [<span class="string">&quot;世界之巅&quot;</span>, <span class="string">&quot;2558749399&quot;</span>]:</span><br><span class="line">                    is_sender = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># 将姓名添加到集合中，如果之前没有出现过的话</span></span><br><span class="line">                <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> names:</span><br><span class="line">                    <span class="comment"># print(name)</span></span><br><span class="line">                    names.add(name)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 自动生成LocalId</span></span><br><span class="line">                local_id = i // <span class="number">3</span> + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 构建CSV行</span></span><br><span class="line">                csv_row = [local_id, <span class="number">1</span>, type_value, <span class="number">0</span>, is_sender, i, <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                           message, date_time, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>]</span><br><span class="line">                csv_writer.writerow(csv_row)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;转换完成，结果保存在 <span class="subst">&#123;output_file&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="comment"># convert_messages(&quot;message.txt&quot;, &quot;messages.csv&quot;)</span></span><br></pre></td></tr></table></figure>

<h3 id="绘图设置"><a href="#绘图设置" class="headerlink" title="绘图设置"></a>绘图设置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sns.set_theme(style=<span class="string">&quot;ticks&quot;</span>)</span><br><span class="line">font = <span class="string">&quot;simsun.ttc&quot;</span></span><br><span class="line">fp = fm.FontProperties(fname=font)</span><br><span class="line">plt.rcParams[<span class="string">&quot;axes.unicode_minus&quot;</span>] = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="人名标签"><a href="#人名标签" class="headerlink" title="人名标签"></a>人名标签</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">&quot;WJY&quot;</span>, <span class="string">&quot;XJH&quot;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="数据读取"><a href="#数据读取" class="headerlink" title="数据读取"></a>数据读取</h3><ul>
<li><code>filePath</code>: 消息记录文件的路径</li>
<li><code>dStart</code>: 开始的时间</li>
<li><code>dEnd</code>: 结束的时间</li>
<li><code>tZone</code>: 时区，例如北京时间为 <code>+8</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">filePath = <span class="string">&quot;messages.csv&quot;</span></span><br><span class="line">dStart = <span class="string">&quot;2022-08-07 00:00:00 +0800&quot;</span></span><br><span class="line">dEnd = <span class="string">&quot;2024-02-10 23:59:59 +0800&quot;</span></span><br><span class="line">tZone = <span class="number">8</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df = pd.read_csv(filePath, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line">df.loc[:, <span class="string">&quot;StrTime&quot;</span>] = pd.to_datetime(df[<span class="string">&quot;StrTime&quot;</span>])</span><br><span class="line">df.loc[:, <span class="string">&quot;day&quot;</span>] = pd.to_datetime(df[<span class="string">&quot;StrTime&quot;</span>]).dt.dayofweek</span><br><span class="line">df.loc[:, <span class="string">&quot;hour&quot;</span>] = pd.to_datetime(df[<span class="string">&quot;StrTime&quot;</span>]).dt.hour</span><br><span class="line">df.loc[:, <span class="string">&quot;Count&quot;</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">dfs = [df.query(<span class="string">&quot;IsSender == 0&quot;</span>), df.query(<span class="string">&quot;IsSender == 1&quot;</span>)]</span><br></pre></td></tr></table></figure>

<h3 id="消息过滤"><a href="#消息过滤" class="headerlink" title="消息过滤"></a>消息过滤</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">textFilter</span>(<span class="params">text: <span class="built_in">str</span></span>):</span><br><span class="line">    text = text.lower()</span><br><span class="line">    <span class="comment"># try:</span></span><br><span class="line">    <span class="comment">#     co = re.compile(&quot;[\U00010000-\U0010ffff]&quot;)</span></span><br><span class="line">    <span class="comment"># except re.error:</span></span><br><span class="line">    <span class="comment">#     co = re.compile(&quot;[\uD800-\uDBFF][\uDC00-\uDFFF]&quot;)</span></span><br><span class="line">    <span class="comment"># text = co.sub(&quot; &quot;, text)</span></span><br><span class="line">    co = re.<span class="built_in">compile</span>(<span class="string">&quot;\[[\u4e00-\u9fa5]+\]&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> co.sub(<span class="string">&quot; &quot;</span>, text)</span><br></pre></td></tr></table></figure>

<h3 id="获取文本消息"><a href="#获取文本消息" class="headerlink" title="获取文本消息"></a>获取文本消息</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">texts = [</span><br><span class="line">    [textFilter(i) <span class="keyword">for</span> i <span class="keyword">in</span> dfs[<span class="number">0</span>].query(<span class="string">&quot;Type == 1&quot;</span>)[<span class="string">&quot;StrContent&quot;</span>].to_list()],</span><br><span class="line">    [textFilter(i) <span class="keyword">for</span> i <span class="keyword">in</span> dfs[<span class="number">1</span>].query(<span class="string">&quot;Type == 1&quot;</span>)[<span class="string">&quot;StrContent&quot;</span>].to_list()],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="消息频率分析"><a href="#消息频率分析" class="headerlink" title="消息频率分析"></a>消息频率分析</h2><h3 id="类型分析"><a href="#类型分析" class="headerlink" title="类型分析"></a>类型分析</h3><p>根据消息的类型进行分类，可以看出喜欢发送的消息类型，同时也可以看出谁发的多</p>
<ul>
<li>1 &#x3D; Text</li>
<li>3 &#x3D; Image</li>
<li>34 &#x3D; Voice</li>
<li>43 &#x3D; Video</li>
<li>47 &#x3D; Sticker</li>
<li>48 &#x3D; Location</li>
<li>10000 &#x3D; System</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    data[labels[i]] = [</span><br><span class="line">        <span class="built_in">len</span>(dfs[i].query(<span class="string">&quot;Type == 1&quot;</span>)),</span><br><span class="line">        <span class="built_in">len</span>(dfs[i].query(<span class="string">&quot;Type == 3&quot;</span>)),</span><br><span class="line">        <span class="built_in">len</span>(dfs[i].query(<span class="string">&quot;Type == 34&quot;</span>)),</span><br><span class="line">        <span class="built_in">len</span>(dfs[i].query(<span class="string">&quot;Type == 43&quot;</span>)),</span><br><span class="line">        <span class="built_in">len</span>(dfs[i].query(<span class="string">&quot;Type == 47&quot;</span>)),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">data = (</span><br><span class="line">    pd.DataFrame(data, index=[<span class="string">&quot;Text&quot;</span>, <span class="string">&quot;Image&quot;</span>, <span class="string">&quot;Voice&quot;</span>, <span class="string">&quot;Video&quot;</span>, <span class="string">&quot;Sticker&quot;</span>])</span><br><span class="line">    .reset_index()</span><br><span class="line">    .melt(<span class="string">&quot;index&quot;</span>)</span><br><span class="line">    .rename(columns=&#123;<span class="string">&quot;index&quot;</span>: <span class="string">&quot;Type&quot;</span>, <span class="string">&quot;variable&quot;</span>: <span class="string">&quot;Person&quot;</span>, <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Count&quot;</span>&#125;)</span><br><span class="line">)</span><br><span class="line">g = sns.catplot(data, kind=<span class="string">&quot;bar&quot;</span>, x=<span class="string">&quot;Type&quot;</span>, y=<span class="string">&quot;Count&quot;</span>, hue=<span class="string">&quot;Person&quot;</span>, palette=<span class="string">&quot;dark&quot;</span>, alpha=<span class="number">0.6</span>, height=<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ax <span class="keyword">in</span> g.axes.ravel():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">        ax.bar_label(ax.containers[i], fontsize=<span class="number">9</span>)</span><br><span class="line">sns.move_legend(g, <span class="string">&quot;upper right&quot;</span>)</span><br><span class="line">plt.yscale(<span class="string">&quot;log&quot;</span>)</span><br><span class="line"></span><br><span class="line">g.figure.set_size_inches(<span class="number">6</span>, <span class="number">5</span>)</span><br><span class="line">g.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_17_0.png" alt="png"></p>
<h3 id="消息长度分析"><a href="#消息长度分析" class="headerlink" title="消息长度分析"></a>消息长度分析</h3><ul>
<li><code>sN</code>: 设置显示范围：<br>$$<br>\mu + \mathrm{sN} * \sigma<br>$$</li>
<li><code>multiple</code>: 直方图堆叠格式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sN = <span class="number">3</span></span><br><span class="line">multiple = <span class="string">&quot;dodge&quot;</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mu, std = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">data = &#123;<span class="string">&quot;Length&quot;</span>: [], <span class="string">&quot;Person&quot;</span>: []&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    length = [<span class="built_in">len</span>(textFilter(i)) <span class="keyword">for</span> i <span class="keyword">in</span> texts[i]]</span><br><span class="line">    data[<span class="string">&quot;Length&quot;</span>] += length</span><br><span class="line">    data[<span class="string">&quot;Person&quot;</span>] += [labels[i]] * <span class="built_in">len</span>(length)</span><br><span class="line">    <span class="keyword">if</span> np.mean(length) + sN * np.std(length) &gt; mu + std:</span><br><span class="line">        mu, std = np.mean(length), np.std(length)</span><br><span class="line">xlim = <span class="built_in">int</span>(np.ceil(mu + sN * std))</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(data)</span><br><span class="line">bins = np.linspace(<span class="number">0</span>, xlim, xlim + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ax = sns.histplot(</span><br><span class="line">    data=data,</span><br><span class="line">    x=<span class="string">&quot;Length&quot;</span>,</span><br><span class="line">    hue=<span class="string">&quot;Person&quot;</span>,</span><br><span class="line">    bins=bins,</span><br><span class="line">    multiple=multiple,</span><br><span class="line">    edgecolor=<span class="string">&quot;.3&quot;</span>,</span><br><span class="line">    linewidth=<span class="number">0.5</span>,</span><br><span class="line">    palette=<span class="string">&quot;dark&quot;</span>,</span><br><span class="line">    alpha=<span class="number">0.6</span>,</span><br><span class="line">)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, xlim)</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Length of Message&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_20_0.png" alt="png"></p>
<h3 id="每日活跃分析"><a href="#每日活跃分析" class="headerlink" title="每日活跃分析"></a>每日活跃分析</h3><p>划分每日24小时内每小时发送的消息数，可以得知每天的活跃的时间段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">&quot;Time&quot;</span>: [], <span class="string">&quot;Person&quot;</span>: []&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    hour = dfs[i][<span class="string">&quot;hour&quot;</span>].to_list()</span><br><span class="line">    data[<span class="string">&quot;Time&quot;</span>] += hour</span><br><span class="line">    data[<span class="string">&quot;Person&quot;</span>] += [labels[i]] * <span class="built_in">len</span>(hour)</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(data)</span><br><span class="line">bins = np.arange(<span class="number">0</span>, <span class="number">25</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ax = sns.histplot(</span><br><span class="line">    data=data,</span><br><span class="line">    x=<span class="string">&quot;Time&quot;</span>,</span><br><span class="line">    hue=<span class="string">&quot;Person&quot;</span>,</span><br><span class="line">    bins=bins,</span><br><span class="line">    multiple=multiple,</span><br><span class="line">    edgecolor=<span class="string">&quot;.3&quot;</span>,</span><br><span class="line">    linewidth=<span class="number">0.5</span>,</span><br><span class="line">    palette=<span class="string">&quot;dark&quot;</span>,</span><br><span class="line">    alpha=<span class="number">0.6</span>,</span><br><span class="line">)</span><br><span class="line">ax.set_xticks(bins)</span><br><span class="line">ax.set_xticklabels(bins)</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Hour&quot;</span>)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">24</span>)</span><br><span class="line">sns.move_legend(ax, loc=<span class="string">&quot;upper center&quot;</span>, bbox_to_anchor=(<span class="number">0.5</span>, <span class="number">1.2</span>), ncol=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_22_0.png" alt="png"></p>
<h3 id="每周活跃分析"><a href="#每周活跃分析" class="headerlink" title="每周活跃分析"></a>每周活跃分析</h3><p>查看一周内从周一到周日每天发送的消息数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;day&quot;</span>)</span><br><span class="line">data = df.groupby(grouper)[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">data = data.sort_index()</span><br><span class="line">data.index = [<span class="string">&quot;Mon&quot;</span>, <span class="string">&quot;Tue&quot;</span>, <span class="string">&quot;Wed&quot;</span>, <span class="string">&quot;Thu&quot;</span>, <span class="string">&quot;Fri&quot;</span>, <span class="string">&quot;Sat&quot;</span>, <span class="string">&quot;Sun&quot;</span>]</span><br><span class="line"></span><br><span class="line">ax = sns.barplot(data=data, errorbar=<span class="literal">None</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Weekday&quot;</span>)</span><br><span class="line">ax.bar_label(ax.containers[<span class="number">0</span>], fontsize=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_24_0.png" alt="png"></p>
<h3 id="按周划分年度活跃分析"><a href="#按周划分年度活跃分析" class="headerlink" title="按周划分年度活跃分析"></a>按周划分年度活跃分析</h3><p>划分每7天内发送的消息数，可以得知每周的活跃的时间段</p>
<ul>
<li><code>wTicks</code>: 每个刻度相差的数值</li>
<li><code>wStart</code>: <strong>当年</strong>第一个周一的日期</li>
<li><code>wEnd</code>: <strong>次年</strong>第一个周一的日期</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wTicks = <span class="number">500</span></span><br><span class="line">wStart = <span class="string">&quot;2022-08-01&quot;</span></span><br><span class="line">wEnd = <span class="string">&quot;2024-02-09&quot;</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;StrTime&quot;</span>, freq=<span class="string">&quot;W-MON&quot;</span>)</span><br><span class="line">data = df.groupby(grouper)[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>().to_frame()</span><br><span class="line">data.index = pd.date_range(start=wStart, end=wEnd, freq=<span class="string">&quot;W-MON&quot;</span>).strftime(<span class="string">&quot;%m-%d&quot;</span>)</span><br><span class="line">data.columns = [<span class="string">&quot;Count&quot;</span>]</span><br><span class="line"></span><br><span class="line">vM = np.ceil(data[<span class="string">&quot;Count&quot;</span>].<span class="built_in">max</span>() / wTicks) * wTicks</span><br><span class="line">norm = plt.Normalize(<span class="number">0</span>, vM)</span><br><span class="line">sm = plt.cm.ScalarMappable(cmap=<span class="string">&quot;Reds&quot;</span>, norm=norm)</span><br><span class="line"></span><br><span class="line">ax = sns.barplot(x=data.index, y=data[<span class="string">&quot;Count&quot;</span>], hue=data[<span class="string">&quot;Count&quot;</span>], hue_norm=norm, palette=<span class="string">&quot;Reds&quot;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">60</span>)</span><br><span class="line"><span class="keyword">for</span> bar <span class="keyword">in</span> ax.containers:</span><br><span class="line">    ax.bar_label(bar, fontsize=<span class="number">10</span>, fmt=<span class="string">&quot;%.0f&quot;</span>)</span><br><span class="line">ax.get_legend().remove()</span><br><span class="line"></span><br><span class="line">axpos = ax.get_position()</span><br><span class="line">caxpos = mtransforms.Bbox.from_extents(axpos.x1 + <span class="number">0.02</span>, axpos.y0, axpos.x1 + <span class="number">0.03</span>, axpos.y1)</span><br><span class="line">cax = ax.figure.add_axes(caxpos)</span><br><span class="line"></span><br><span class="line">locator = mticker.MultipleLocator(wTicks)</span><br><span class="line">formatter = mticker.StrMethodFormatter(<span class="string">&quot;&#123;x:.0f&#125;&quot;</span>)</span><br><span class="line">cax.figure.colorbar(sm, cax=cax, ticks=locator, <span class="built_in">format</span>=formatter)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">20</span>, <span class="number">8</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
</code></pre>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_27_1.png" alt="png"></p>
<h3 id="按周划分聊天热情分析"><a href="#按周划分聊天热情分析" class="headerlink" title="按周划分聊天热情分析"></a>按周划分聊天热情分析</h3><p>划分每7天内的聊天热情指数，聊天热情指数为发送的消息数减去收到的消息数与总消息数的比值：<br>$$<br>E &#x3D; \frac{Q_\mathrm{S} - Q_\mathrm{R}}{Q_\mathrm{S} + Q_\mathrm{R}}<br>$$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;StrTime&quot;</span>, freq=<span class="string">&quot;W-MON&quot;</span>)</span><br><span class="line">df_W1 = dfs[<span class="number">0</span>].groupby(grouper)[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">df_W2 = dfs[<span class="number">1</span>].groupby(grouper)[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(&#123;<span class="string">&quot;E&quot;</span>: (df_W1 - df_W2) / (df_W1 + df_W2)&#125;)</span><br><span class="line">data.index = pd.date_range(start=wStart, end=wEnd, freq=<span class="string">&quot;W-MON&quot;</span>).strftime(<span class="string">&quot;%m-%d&quot;</span>)</span><br><span class="line"></span><br><span class="line">vM = data[<span class="string">&quot;E&quot;</span>].<span class="built_in">abs</span>().<span class="built_in">max</span>()</span><br><span class="line">vm = data[<span class="string">&quot;E&quot;</span>].<span class="built_in">min</span>()</span><br><span class="line">norm = plt.Normalize(-vM, vM)</span><br><span class="line">sm = plt.cm.ScalarMappable(cmap=<span class="string">&quot;coolwarm&quot;</span>, norm=norm)</span><br><span class="line"><span class="built_in">print</span>(data.index)</span><br><span class="line"><span class="built_in">print</span>(data[<span class="string">&quot;E&quot;</span>])</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;E&quot;</span>].isna().<span class="built_in">any</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;列 &#x27;E&#x27; 中包含NaN项&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;列 &#x27;E&#x27; 中不包含NaN项&quot;</span>)</span><br><span class="line">data[<span class="string">&quot;E&quot;</span>].fillna(<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">ax = sns.barplot(x=data.index, y=data[<span class="string">&quot;E&quot;</span>], hue=data[<span class="string">&quot;E&quot;</span>], hue_norm=norm, palette=<span class="string">&quot;coolwarm&quot;</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">60</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Enthusiasm Index&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> bar <span class="keyword">in</span> ax.containers:</span><br><span class="line">    ax.bar_label(bar, fontsize=<span class="number">10</span>, fmt=<span class="string">&quot;%.2f&quot;</span>)</span><br><span class="line">ax.get_legend().remove()</span><br><span class="line"></span><br><span class="line">axpos = ax.get_position()</span><br><span class="line">caxpos = mtransforms.Bbox.from_extents(axpos.x1 + <span class="number">0.02</span>, axpos.y0, axpos.x1 + <span class="number">0.03</span>, axpos.y1)</span><br><span class="line">cax = ax.figure.add_axes(caxpos)</span><br><span class="line"></span><br><span class="line">locator = mticker.MultipleLocator(<span class="number">0.1</span>)</span><br><span class="line">formatter = mticker.StrMethodFormatter(<span class="string">&quot;&#123;x:.2f&#125;&quot;</span>)</span><br><span class="line">cax.figure.colorbar(sm, cax=cax, ticks=locator, <span class="built_in">format</span>=formatter)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">20</span>, <span class="number">8</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
F:\user\Temp\ipykernel_9048\3741989350.py:18: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method(&#123;col: value&#125;, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.
</code></pre>
<p>​<br>​      data[“E”].fillna(0, inplace&#x3D;True)</p>
<pre><code>Index([&#39;08-01&#39;, &#39;08-08&#39;, &#39;08-15&#39;, &#39;08-22&#39;, &#39;08-29&#39;, &#39;09-05&#39;, &#39;09-12&#39;, &#39;09-19&#39;,
       &#39;09-26&#39;, &#39;10-03&#39;, &#39;10-10&#39;, &#39;10-17&#39;, &#39;10-24&#39;, &#39;10-31&#39;, &#39;11-07&#39;, &#39;11-14&#39;,
       &#39;11-21&#39;, &#39;11-28&#39;, &#39;12-05&#39;, &#39;12-12&#39;, &#39;12-19&#39;, &#39;12-26&#39;, &#39;01-02&#39;, &#39;01-09&#39;,
       &#39;01-16&#39;, &#39;01-23&#39;, &#39;01-30&#39;, &#39;02-06&#39;, &#39;02-13&#39;, &#39;02-20&#39;, &#39;02-27&#39;, &#39;03-06&#39;,
       &#39;03-13&#39;, &#39;03-20&#39;, &#39;03-27&#39;, &#39;04-03&#39;, &#39;04-10&#39;, &#39;04-17&#39;, &#39;04-24&#39;, &#39;05-01&#39;,
       &#39;05-08&#39;, &#39;05-15&#39;, &#39;05-22&#39;, &#39;05-29&#39;, &#39;06-05&#39;, &#39;06-12&#39;, &#39;06-19&#39;, &#39;06-26&#39;,
       &#39;07-03&#39;, &#39;07-10&#39;, &#39;07-17&#39;, &#39;07-24&#39;, &#39;07-31&#39;, &#39;08-07&#39;, &#39;08-14&#39;, &#39;08-21&#39;,
       &#39;08-28&#39;, &#39;09-04&#39;, &#39;09-11&#39;, &#39;09-18&#39;, &#39;09-25&#39;, &#39;10-02&#39;, &#39;10-09&#39;, &#39;10-16&#39;,
       &#39;10-23&#39;, &#39;10-30&#39;, &#39;11-06&#39;, &#39;11-13&#39;, &#39;11-20&#39;, &#39;11-27&#39;, &#39;12-04&#39;, &#39;12-11&#39;,
       &#39;12-18&#39;, &#39;12-25&#39;, &#39;01-01&#39;, &#39;01-08&#39;, &#39;01-15&#39;, &#39;01-22&#39;, &#39;01-29&#39;, &#39;02-05&#39;],
      dtype=&#39;object&#39;)
08-01    0.120000
08-08    0.109091
08-15    0.071633
08-22   -0.007092
08-29    0.075426
           ...   
01-08   -0.003752
01-15    0.100529
01-22    0.159184
01-29    0.068273
02-05    0.014085
Name: E, Length: 80, dtype: float64
列 &#39;E&#39; 中包含NaN项
</code></pre>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_29_2.png" alt="png"></p>
<h3 id="按日划分年度活跃分析"><a href="#按日划分年度活跃分析" class="headerlink" title="按日划分年度活跃分析"></a>按日划分年度活跃分析</h3><p>以热力图的方式展示按日划分的年度活跃情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;StrTime&quot;</span>, freq=<span class="string">&quot;D&quot;</span>)</span><br><span class="line">data = df.groupby(grouper)[<span class="string">&quot;Count&quot;</span>].<span class="built_in">sum</span>()</span><br><span class="line">data = data.to_frame()</span><br><span class="line"></span><br><span class="line">wStart = <span class="string">&quot;2023-01-01&quot;</span></span><br><span class="line">wEnd = <span class="string">&quot;2024-01-01&quot;</span></span><br><span class="line"></span><br><span class="line">data[<span class="string">&quot;date&quot;</span>] = data.index</span><br><span class="line">data[<span class="string">&quot;week&quot;</span>] = data[<span class="string">&quot;date&quot;</span>].dt.isocalendar()[<span class="string">&quot;week&quot;</span>]</span><br><span class="line">data[<span class="string">&quot;day&quot;</span>] = data[<span class="string">&quot;date&quot;</span>].dt.dayofweek</span><br><span class="line">data.index = <span class="built_in">range</span>(<span class="built_in">len</span>(data))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    <span class="keyword">if</span> data.loc[i, <span class="string">&quot;week&quot;</span>] &gt; <span class="number">1</span>:</span><br><span class="line">        data.loc[i, <span class="string">&quot;week&quot;</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line">data = data.pivot_table(index=<span class="string">&quot;day&quot;</span>, columns=<span class="string">&quot;week&quot;</span>, values=<span class="string">&quot;Count&quot;</span>)</span><br><span class="line">data.index = [<span class="string">&quot;Mon&quot;</span>, <span class="string">&quot;Tue&quot;</span>, <span class="string">&quot;Wed&quot;</span>, <span class="string">&quot;Thu&quot;</span>, <span class="string">&quot;Fri&quot;</span>, <span class="string">&quot;Sat&quot;</span>, <span class="string">&quot;Sun&quot;</span>]</span><br><span class="line">data.columns = pd.date_range(start=wStart, end=wEnd, freq=<span class="string">&quot;W-MON&quot;</span>).strftime(<span class="string">&quot;%m-%d&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax = sns.heatmap(</span><br><span class="line">    data,</span><br><span class="line">    annot=<span class="literal">False</span>,</span><br><span class="line">    linewidths=<span class="number">0.5</span>,</span><br><span class="line">    cbar_kws=&#123;<span class="string">&quot;orientation&quot;</span>: <span class="string">&quot;vertical&quot;</span>, <span class="string">&quot;location&quot;</span>: <span class="string">&quot;left&quot;</span>, <span class="string">&quot;pad&quot;</span>: <span class="number">0.03</span>&#125;,</span><br><span class="line">    cmap=<span class="string">&quot;Reds&quot;</span>,</span><br><span class="line">)</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Week&quot;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Weekday&quot;</span>)</span><br><span class="line">ax.figure.set_size_inches(<span class="number">24</span>, <span class="number">4</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)


     Count       date  week  day
0       46 2022-08-07     0    6
1      104 2022-08-08     0    0
2      100 2022-08-09     0    1
3       47 2022-08-10     0    2
4        3 2022-08-11     0    3
..     ...        ...   ...  ...
547     76 2024-02-05     6    0
548      0 2024-02-06     6    1
549      0 2024-02-07     6    2
550     47 2024-02-08     6    3
551     24 2024-02-09     6    4

[552 rows x 4 columns]
</code></pre>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_31_2.png" alt="png"></p>
<h2 id="词语分析"><a href="#词语分析" class="headerlink" title="词语分析"></a>词语分析</h2><h3 id="分词词典、停止词与去除词性"><a href="#分词词典、停止词与去除词性" class="headerlink" title="分词词典、停止词与去除词性"></a>分词词典、停止词与去除词性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jieba.load_userdict(<span class="string">&quot;thuocl.txt&quot;</span>)</span><br><span class="line">jieba.load_userdict(<span class="string">&quot;userdict.txt&quot;</span>)</span><br><span class="line">stopwords = [line.strip() <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&quot;stopwords.txt&quot;</span>, <span class="string">&quot;r&quot;</span>).readlines()] + [<span class="string">&quot; &quot;</span>, <span class="string">&quot;\n&quot;</span>, <span class="string">&quot;\r\n&quot;</span>]</span><br><span class="line">wordclass = [<span class="string">&quot;v&quot;</span>, <span class="string">&quot;u&quot;</span>, <span class="string">&quot;vd&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;w&quot;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="分词函数"><a href="#分词函数" class="headerlink" title="分词函数"></a>分词函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">wordSplit</span>(<span class="params">texts, wordclass</span>):</span><br><span class="line">    words = []</span><br><span class="line">    pbar = tqdm(total=<span class="built_in">len</span>(texts))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(texts)):</span><br><span class="line">        res = pseg.lcut(texts[i])</span><br><span class="line">        <span class="keyword">for</span> pair <span class="keyword">in</span> res:</span><br><span class="line">            <span class="keyword">if</span> pair.word <span class="keyword">in</span> stopwords:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> pair.flag <span class="keyword">in</span> wordclass:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            words.append(pair.word)</span><br><span class="line">        <span class="keyword">if</span> i % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">            pbar.update(<span class="number">1000</span>)</span><br><span class="line">    pbar.close()</span><br><span class="line">    <span class="keyword">return</span> words</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">words = [wordSplit(texts[i], wordclass) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br></pre></td></tr></table></figure>

<pre><code>15000it [00:08, 1837.45it/s]                           
17000it [00:07, 2395.06it/s]                           
</code></pre>
<h3 id="词云绘制"><a href="#词云绘制" class="headerlink" title="词云绘制"></a>词云绘制</h3><ul>
<li><code>font</code>: 字体路径，至少支持中文，最好同时支持中文和emoji</li>
<li><code>mask</code>: 词云的蒙版，影响词云的形状</li>
<li><code>cmap</code>: 色阶</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">font = <span class="string">&quot;simsun.ttc&quot;</span></span><br><span class="line">mask = np.array(Image.<span class="built_in">open</span>(<span class="string">&quot;mask.png&quot;</span>))</span><br><span class="line">masks = [np.array(Image.<span class="built_in">open</span>(<span class="string">&quot;mask_L.jpg&quot;</span>)), np.array(Image.<span class="built_in">open</span>(<span class="string">&quot;mask_F.jpg&quot;</span>))]</span><br><span class="line">cmap = ListedColormap(</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&quot;#fac1cf&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#a9d7ba&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#58b1db&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#f296ab&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#5dab81&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#3d9ec4&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#e16a8d&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#237b50&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#1e8299&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#8d3549&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#35563b&quot;</span>,</span><br><span class="line">        <span class="string">&quot;#2d5d73&quot;</span>,</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">wordCloud</span>(<span class="params">text, font, mask, cmap</span>):</span><br><span class="line">    wc = WordCloud(</span><br><span class="line">        background_color=<span class="string">&quot;white&quot;</span>,</span><br><span class="line">        scale=<span class="number">5</span>,</span><br><span class="line">        font_path=font,</span><br><span class="line">        mask=mask,</span><br><span class="line">        colormap=cmap,</span><br><span class="line">        collocations=<span class="literal">False</span>,</span><br><span class="line">    ).generate(text)</span><br><span class="line">    plt.imshow(wc)</span><br><span class="line">    plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wordCloud(<span class="string">&quot; &quot;</span>.join(words[<span class="number">0</span>]), font, masks[<span class="number">0</span>], cmap)</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_40_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wordCloud(<span class="string">&quot; &quot;</span>.join(words[<span class="number">1</span>]), font, masks[<span class="number">1</span>], cmap)</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_41_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wordCloud(<span class="string">&quot; &quot;</span>.join(words[<span class="number">0</span>] + words[<span class="number">1</span>]), font, mask, cmap)</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_42_0.png" alt="png"></p>
<h3 id="高频词排行"><a href="#高频词排行" class="headerlink" title="高频词排行"></a>高频词排行</h3><p>列出常用的 N 个词，并且展示双方的贡献</p>
<ul>
<li><code>wN</code>: 词的数目，默认为50</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wN = <span class="number">50</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">data = pd.DataFrame(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;words&quot;</span>: words[<span class="number">0</span>] + words[<span class="number">1</span>],</span><br><span class="line">        <span class="string">&quot;L&quot;</span>: [<span class="number">1</span>] * <span class="built_in">len</span>(words[<span class="number">0</span>]) + [<span class="number">0</span>] * <span class="built_in">len</span>(words[<span class="number">1</span>]),</span><br><span class="line">        <span class="string">&quot;F&quot;</span>: [<span class="number">0</span>] * <span class="built_in">len</span>(words[<span class="number">0</span>]) + [<span class="number">1</span>] * <span class="built_in">len</span>(words[<span class="number">1</span>]),</span><br><span class="line">        <span class="string">&quot;S&quot;</span>: [<span class="number">1</span>] * <span class="built_in">len</span>(words[<span class="number">0</span>]) + [<span class="number">1</span>] * <span class="built_in">len</span>(words[<span class="number">1</span>]),</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;words&quot;</span>)</span><br><span class="line">data = data.groupby(grouper).<span class="built_in">sum</span>()</span><br><span class="line">data = data.sort_values(by=<span class="string">&quot;S&quot;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">data = data.iloc[:wN]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将部分无法识别的 emoji 转化为文字</span></span><br><span class="line">tmp = data.index.to_list()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(wN):</span><br><span class="line">    <span class="keyword">if</span> tmp[i] == <span class="string">&quot;😘&quot;</span>:</span><br><span class="line">        tmp[i] = <span class="string">&quot;[亲亲]&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> tmp[i] == <span class="string">&quot;😂&quot;</span>:</span><br><span class="line">        tmp[i] = <span class="string">&quot;[笑哭]&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> tmp[i] == <span class="string">&quot;🤦&quot;</span>:</span><br><span class="line">        tmp[i] = <span class="string">&quot;[捂脸]&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> tmp[i] == <span class="string">&quot;😁&quot;</span>:</span><br><span class="line">        tmp[i] = <span class="string">&quot;[呲牙]&quot;</span></span><br><span class="line">data.index = tmp</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">ratio = data[<span class="string">&quot;L&quot;</span>] / data[<span class="string">&quot;S&quot;</span>]</span><br><span class="line">norm = plt.Normalize(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">sm = plt.cm.ScalarMappable(cmap=<span class="string">&quot;coolwarm&quot;</span>, norm=norm)</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">10</span>), dpi=<span class="number">300</span>)</span><br><span class="line">grid = plt.GridSpec(<span class="number">1</span>, <span class="number">4</span>, wspace=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">ax0 = fig.add_subplot(grid[<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">sns.barplot(x=-data[<span class="string">&quot;L&quot;</span>], y=data.index, ax=ax0, hue=ratio, hue_norm=norm, palette=<span class="string">&quot;coolwarm&quot;</span>)</span><br><span class="line">ax1 = fig.add_subplot(grid[<span class="number">0</span>, <span class="number">1</span>:])</span><br><span class="line">sns.barplot(x=data[<span class="string">&quot;F&quot;</span>], y=data.index, ax=ax1, hue=(<span class="number">1</span> - ratio), hue_norm=norm, palette=<span class="string">&quot;coolwarm&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax0.set_xlabel(<span class="string">&quot;Word Frequency&quot;</span>)</span><br><span class="line">ax0.set_ylabel(<span class="string">&quot;&quot;</span>)</span><br><span class="line">ax0.set_xticks(<span class="built_in">range</span>(-<span class="number">400</span>, <span class="number">1</span>, <span class="number">200</span>))</span><br><span class="line">ax0.set_xticklabels([<span class="number">400</span>, <span class="number">200</span>, <span class="number">0</span>])</span><br><span class="line">ax0.set_xlim(-<span class="number">400</span>, <span class="number">0</span>)</span><br><span class="line">ax0.set_yticks([])</span><br><span class="line">ax0.spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax0.spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax0.spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax0.set_title(<span class="string">&quot;WJY&quot;</span>)</span><br><span class="line">ax0.get_legend().remove()</span><br><span class="line"></span><br><span class="line">ax1.set_xlabel(<span class="string">&quot;Word Frequency&quot;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&quot;&quot;</span>)</span><br><span class="line">ax1.set_xticks(<span class="built_in">range</span>(<span class="number">0</span>, <span class="number">1201</span>, <span class="number">200</span>))</span><br><span class="line">ax1.set_xticklabels([<span class="number">0</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">600</span>, <span class="number">800</span>, <span class="number">1000</span>, <span class="number">1200</span>])</span><br><span class="line">ax1.set_xlim(<span class="number">0</span>, <span class="number">1200</span>)</span><br><span class="line">ax1.set_yticks([])</span><br><span class="line">ax1.spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax1.spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax1.spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">ax1.set_title(<span class="string">&quot;XJH&quot;</span>)</span><br><span class="line">ax1.get_legend().remove()</span><br><span class="line"></span><br><span class="line">axpos = ax1.get_position()</span><br><span class="line">caxpos = mtransforms.Bbox.from_extents(axpos.x0 + <span class="number">0.06</span>, axpos.y0 + <span class="number">0.03</span>, axpos.x1, axpos.y0 + <span class="number">0.04</span>)</span><br><span class="line">cax = ax1.figure.add_axes(caxpos)</span><br><span class="line"></span><br><span class="line">locator = mticker.MultipleLocator(<span class="number">0.1</span>)</span><br><span class="line">formatter = mticker.StrMethodFormatter(<span class="string">&quot;&#123;x:.1f&#125;&quot;</span>)</span><br><span class="line">cax.figure.colorbar(sm, cax=cax, orientation=<span class="string">&quot;horizontal&quot;</span>, ticks=locator, <span class="built_in">format</span>=formatter)</span><br><span class="line"><span class="comment"># cax.tick_params(top=True, labeltop=True, bottom=False, labelbottom=False)</span></span><br><span class="line">cax.set_title(<span class="string">&quot;ratio&quot;</span>)</span><br><span class="line"></span><br><span class="line">x0 = ax0.get_position().x1</span><br><span class="line">x1 = ax1.get_position().x0</span><br><span class="line">xm = (x0 + x1) / <span class="number">2</span></span><br><span class="line">y0 = ax0.get_position().y0</span><br><span class="line">y1 = ax0.get_position().y1</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(wN):</span><br><span class="line">    fig.text(</span><br><span class="line">        xm, y0 + (y1 - y0) * (wN - i - <span class="number">0.5</span>) / wN, data.index[i],</span><br><span class="line">        color=<span class="string">&quot;black&quot;</span>, ha=<span class="string">&quot;center&quot;</span>, va=<span class="string">&quot;center&quot;</span>, fontproperties=fp</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">fig.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_47_0.png" alt="png"></p>
<h2 id="情感分析"><a href="#情感分析" class="headerlink" title="情感分析"></a>情感分析</h2><p>使用 <code>paddlenlp</code> 进行情感分析，得到的分数在 [-1, 1] 之间，越小越消极，越大越积极</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dfE = df.query(<span class="string">&quot;Type == 1&quot;</span>)[[<span class="string">&quot;IsSender&quot;</span>, <span class="string">&quot;StrContent&quot;</span>, <span class="string">&quot;StrTime&quot;</span>, <span class="string">&quot;hour&quot;</span>]]</span><br><span class="line">dfE.index = <span class="built_in">range</span>(<span class="built_in">len</span>(dfE))</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">senta = Taskflow(<span class="string">&quot;sentiment_analysis&quot;</span>, home_path=<span class="string">&quot;./&quot;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scores = pd.DataFrame(senta([textFilter(i) <span class="keyword">for</span> i <span class="keyword">in</span> dfE[<span class="string">&quot;StrContent&quot;</span>].to_list()]))</span><br><span class="line">scores.loc[scores[<span class="string">&quot;label&quot;</span>] == <span class="string">&quot;negative&quot;</span>, <span class="string">&quot;score&quot;</span>] = <span class="number">1</span> - scores.loc[scores[<span class="string">&quot;label&quot;</span>] == <span class="string">&quot;negative&quot;</span>, <span class="string">&quot;score&quot;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dfE[<span class="string">&quot;score&quot;</span>] = scores[<span class="string">&quot;score&quot;</span>]</span><br><span class="line">dfE[<span class="string">&quot;score&quot;</span>] = <span class="number">2</span> * dfE[<span class="string">&quot;score&quot;</span>] - <span class="number">1</span></span><br><span class="line">dfE[<span class="string">&quot;Person&quot;</span>] = dfE.apply(<span class="keyword">lambda</span> x: labels[x[<span class="string">&quot;IsSender&quot;</span>]], axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">dfEs = [dfE.query(<span class="string">&quot;IsSender == 0&quot;</span>), dfE.query(<span class="string">&quot;IsSender == 1&quot;</span>)]</span><br></pre></td></tr></table></figure>

<h3 id="年度总体情感分布"><a href="#年度总体情感分布" class="headerlink" title="年度总体情感分布"></a>年度总体情感分布</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.histplot(data=dfE, x=<span class="string">&quot;score&quot;</span>, hue=<span class="string">&quot;Person&quot;</span>, palette=<span class="string">&quot;dark&quot;</span>, alpha=<span class="number">0.6</span>, bins=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Sentiment Score&quot;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Count&quot;</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;Sentiment Distribution&quot;</span>)</span><br><span class="line">ax.set_xlim(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">8</span>, <span class="number">3</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_54_0.png" alt="png"></p>
<h3 id="按周统计平均情感指数"><a href="#按周统计平均情感指数" class="headerlink" title="按周统计平均情感指数"></a>按周统计平均情感指数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">weekAvgSenScore</span>(<span class="params">df</span>):</span><br><span class="line">    wStart = <span class="string">&quot;2022-08-01&quot;</span></span><br><span class="line">    wEnd = <span class="string">&quot;2024-02-10&quot;</span></span><br><span class="line"></span><br><span class="line">    grouper = pd.Grouper(key=<span class="string">&quot;StrTime&quot;</span>, freq=<span class="string">&quot;W-MON&quot;</span>)</span><br><span class="line">    data = df.groupby(grouper)[<span class="string">&quot;score&quot;</span>].mean().to_frame()</span><br><span class="line">    data.index = pd.date_range(start=wStart, end=wEnd, freq=<span class="string">&quot;W-MON&quot;</span>).strftime(<span class="string">&quot;%m-%d&quot;</span>)</span><br><span class="line">    data.columns = [<span class="string">&quot;score&quot;</span>]</span><br><span class="line"></span><br><span class="line">    vM = data[<span class="string">&quot;score&quot;</span>].<span class="built_in">abs</span>().<span class="built_in">max</span>()</span><br><span class="line">    norm = plt.Normalize(-vM, vM)</span><br><span class="line">    sm = plt.cm.ScalarMappable(cmap=<span class="string">&quot;coolwarm&quot;</span>, norm=norm)</span><br><span class="line">    data[<span class="string">&quot;score&quot;</span>].fillna(<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    ax = sns.barplot(x=data.index, y=data[<span class="string">&quot;score&quot;</span>], hue=data[<span class="string">&quot;score&quot;</span>], hue_norm=norm, palette=<span class="string">&quot;coolwarm&quot;</span>)</span><br><span class="line">    ax.set_xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line">    plt.xticks(rotation=<span class="number">60</span>)</span><br><span class="line">    <span class="keyword">for</span> bar <span class="keyword">in</span> ax.containers:</span><br><span class="line">        ax.bar_label(bar, fontsize=<span class="number">10</span>, fmt=<span class="string">&quot;%.2f&quot;</span>)</span><br><span class="line">    ax.get_legend().remove()</span><br><span class="line"></span><br><span class="line">    axpos = ax.get_position()</span><br><span class="line">    caxpos = mtransforms.Bbox.from_extents(axpos.x1 + <span class="number">0.02</span>, axpos.y0, axpos.x1 + <span class="number">0.03</span>, axpos.y1)</span><br><span class="line">    cax = ax.figure.add_axes(caxpos)</span><br><span class="line"></span><br><span class="line">    locator = mticker.MultipleLocator(<span class="number">0.02</span>)</span><br><span class="line">    formatter = mticker.StrMethodFormatter(<span class="string">&quot;&#123;x:.2f&#125;&quot;</span>)</span><br><span class="line">    cax.figure.colorbar(sm, cax=cax, ticks=locator, <span class="built_in">format</span>=formatter)</span><br><span class="line"></span><br><span class="line">    ax.figure.set_size_inches(<span class="number">20</span>, <span class="number">8</span>)</span><br><span class="line">    ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">    plt.show()</span><br><span class="line">    plt.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data[<span class="string">&quot;score&quot;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avgSenScore0 = weekAvgSenScore(dfEs[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
F:\user\Temp\ipykernel_9048\3472776600.py:13: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method(&#123;col: value&#125;, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.
</code></pre>
<p>​<br>​      data[“score”].fillna(0, inplace&#x3D;True)</p>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_57_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avgSenScore1 = weekAvgSenScore(dfEs[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
F:\user\Temp\ipykernel_9048\3472776600.py:13: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method(&#123;col: value&#125;, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.
</code></pre>
<p>​<br>​      data[“score”].fillna(0, inplace&#x3D;True)</p>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_58_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ = weekAvgSenScore(dfE)</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
F:\user\Temp\ipykernel_9048\3472776600.py:13: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method(&#123;col: value&#125;, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.
</code></pre>
<p>​<br>​      data[“score”].fillna(0, inplace&#x3D;True)</p>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_59_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.lineplot(data=avgSenScore0, linewidth=<span class="number">3</span>, marker=<span class="string">&quot;s&quot;</span>, markersize=<span class="number">15</span>, label=labels[<span class="number">0</span>])</span><br><span class="line">ax = sns.lineplot(data=avgSenScore1, linewidth=<span class="number">3</span>, marker=<span class="string">&quot;^&quot;</span>, markersize=<span class="number">15</span>, ax=ax, label=labels[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">60</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Average Sentiment Score&quot;</span>)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">52</span>)</span><br><span class="line">ax.legend(prop=&#123;<span class="string">&quot;size&quot;</span>: <span class="number">24</span>&#125;)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">20</span>, <span class="number">8</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_60_0.png" alt="png"></p>
<h3 id="按周统计累计情感指数"><a href="#按周统计累计情感指数" class="headerlink" title="按周统计累计情感指数"></a>按周统计累计情感指数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">weekTotSenScore</span>(<span class="params">df</span>):</span><br><span class="line">    wStart = <span class="string">&quot;2022-08-01&quot;</span></span><br><span class="line">    wEnd = <span class="string">&quot;2024-02-10&quot;</span></span><br><span class="line">    grouper = pd.Grouper(key=<span class="string">&quot;StrTime&quot;</span>, freq=<span class="string">&quot;W-MON&quot;</span>)</span><br><span class="line">    data = df.groupby(grouper)[<span class="string">&quot;score&quot;</span>].<span class="built_in">sum</span>().to_frame()</span><br><span class="line">    data.index = pd.date_range(start=wStart, end=wEnd, freq=<span class="string">&quot;W-MON&quot;</span>).strftime(<span class="string">&quot;%m-%d&quot;</span>)</span><br><span class="line">    data.columns = [<span class="string">&quot;score&quot;</span>]</span><br><span class="line"></span><br><span class="line">    vM = data[<span class="string">&quot;score&quot;</span>].<span class="built_in">abs</span>().<span class="built_in">max</span>()</span><br><span class="line">    norm = plt.Normalize(-vM, vM)</span><br><span class="line">    sm = plt.cm.ScalarMappable(cmap=<span class="string">&quot;coolwarm&quot;</span>, norm=norm)</span><br><span class="line"></span><br><span class="line">    ax = sns.barplot(x=data.index, y=data[<span class="string">&quot;score&quot;</span>], hue=data[<span class="string">&quot;score&quot;</span>], hue_norm=norm, palette=<span class="string">&quot;coolwarm&quot;</span>)</span><br><span class="line">    ax.set_xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line">    plt.xticks(rotation=<span class="number">60</span>)</span><br><span class="line">    <span class="keyword">for</span> bar <span class="keyword">in</span> ax.containers:</span><br><span class="line">        ax.bar_label(bar, fontsize=<span class="number">10</span>, fmt=<span class="string">&quot;%.2f&quot;</span>)</span><br><span class="line">    ax.get_legend().remove()</span><br><span class="line"></span><br><span class="line">    axpos = ax.get_position()</span><br><span class="line">    caxpos = mtransforms.Bbox.from_extents(axpos.x1 + <span class="number">0.02</span>, axpos.y0, axpos.x1 + <span class="number">0.03</span>, axpos.y1)</span><br><span class="line">    cax = ax.figure.add_axes(caxpos)</span><br><span class="line"></span><br><span class="line">    locator = mticker.MultipleLocator(<span class="number">20</span>)</span><br><span class="line">    formatter = mticker.StrMethodFormatter(<span class="string">&quot;&#123;x:.2f&#125;&quot;</span>)</span><br><span class="line">    cax.figure.colorbar(sm, cax=cax, ticks=locator, <span class="built_in">format</span>=formatter)</span><br><span class="line"></span><br><span class="line">    ax.figure.set_size_inches(<span class="number">20</span>, <span class="number">8</span>)</span><br><span class="line">    ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">    plt.show()</span><br><span class="line">    plt.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data[<span class="string">&quot;score&quot;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">totSenScore0 = weekTotSenScore(dfEs[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
</code></pre>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_63_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">totSenScore1 = weekTotSenScore(dfEs[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
</code></pre>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_64_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ = weekTotSenScore(dfE)</span><br></pre></td></tr></table></figure>

<pre><code>f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
f:\ProgramData\miniconda3\envs\wechatmsg\lib\site-packages\pandas\core\groupby\grouper.py:381: FutureWarning: Dtype inference on a pandas object (Series, Index, ExtensionArray) is deprecated. The Index constructor will keep the original dtype in the future. Call `infer_objects` on the result to get the old behavior.
  ax = Index(obj[key], name=key)
</code></pre>
<p><img src="/images/QQmsganalysis_files/QQmsganalysis_65_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.lineplot(data=totSenScore0, linewidth=<span class="number">3</span>, marker=<span class="string">&quot;s&quot;</span>, markersize=<span class="number">15</span>, label=labels[<span class="number">0</span>])</span><br><span class="line">ax = sns.lineplot(data=totSenScore1, linewidth=<span class="number">3</span>, marker=<span class="string">&quot;^&quot;</span>, markersize=<span class="number">15</span>, ax=ax, label=labels[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">60</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Total Sentiment Score&quot;</span>)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">52</span>)</span><br><span class="line">ax.legend(prop=&#123;<span class="string">&quot;size&quot;</span>: <span class="number">24</span>&#125;)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">20</span>, <span class="number">8</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_66_0.png" alt="png"></p>
<h3 id="每日平均情感分析"><a href="#每日平均情感分析" class="headerlink" title="每日平均情感分析"></a>每日平均情感分析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;hour&quot;</span>)</span><br><span class="line"></span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    tmp = dfEs[k].groupby(grouper)[<span class="string">&quot;score&quot;</span>].mean().sort_index()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">24</span>):</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> tmp.index:</span><br><span class="line">            data.append(tmp[i])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data.append(<span class="number">0</span>)</span><br><span class="line">    data.append(<span class="number">0</span>)</span><br><span class="line">data = pd.DataFrame(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Score&quot;</span>: data,</span><br><span class="line">        <span class="string">&quot;Person&quot;</span>: [labels[<span class="number">0</span>]] * <span class="number">25</span> + [labels[<span class="number">1</span>]] * <span class="number">25</span>,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">xBins = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">25</span>)]</span><br><span class="line">ax = sns.histplot(</span><br><span class="line">    data=data,</span><br><span class="line">    x=xBins * <span class="number">2</span>,</span><br><span class="line">    bins=xBins,</span><br><span class="line">    weights=<span class="string">&quot;Score&quot;</span>,</span><br><span class="line">    hue=<span class="string">&quot;Person&quot;</span>,</span><br><span class="line">    multiple=multiple,</span><br><span class="line">    edgecolor=<span class="string">&quot;.3&quot;</span>,</span><br><span class="line">    linewidth=<span class="number">0.5</span>,</span><br><span class="line">    palette=<span class="string">&quot;dark&quot;</span>,</span><br><span class="line">    alpha=<span class="number">0.6</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ax.set_xticks(<span class="built_in">range</span>(<span class="number">25</span>))</span><br><span class="line">ax.set_xticklabels(<span class="built_in">range</span>(<span class="number">25</span>))</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Hour&quot;</span>)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">24</span>)</span><br><span class="line">ax.set_ylim(np.<span class="built_in">min</span>([<span class="number">0</span>, np.floor(data[<span class="string">&quot;Score&quot;</span>].<span class="built_in">min</span>() / <span class="number">0.05</span>) * <span class="number">0.05</span>]), np.ceil(data[<span class="string">&quot;Score&quot;</span>].<span class="built_in">max</span>() / <span class="number">0.05</span>) * <span class="number">0.05</span>)</span><br><span class="line">sns.move_legend(ax, loc=<span class="string">&quot;upper center&quot;</span>, bbox_to_anchor=(<span class="number">0.5</span>, <span class="number">1.2</span>), ncol=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_68_0.png" alt="png"></p>
<h3 id="每日累计情感分析"><a href="#每日累计情感分析" class="headerlink" title="每日累计情感分析"></a>每日累计情感分析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">grouper = pd.Grouper(key=<span class="string">&quot;hour&quot;</span>)</span><br><span class="line"></span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    tmp = dfEs[k].groupby(grouper)[<span class="string">&quot;score&quot;</span>].<span class="built_in">sum</span>().sort_index()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">24</span>):</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> tmp.index:</span><br><span class="line">            data.append(tmp[i])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data.append(<span class="number">0</span>)</span><br><span class="line">    data.append(<span class="number">0</span>)</span><br><span class="line">data = pd.DataFrame(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Score&quot;</span>: data,</span><br><span class="line">        <span class="string">&quot;Person&quot;</span>: [labels[<span class="number">0</span>]] * <span class="number">25</span> + [labels[<span class="number">1</span>]] * <span class="number">25</span>,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">xBins = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">25</span>)]</span><br><span class="line">ax = sns.histplot(</span><br><span class="line">    data=data,</span><br><span class="line">    x=xBins * <span class="number">2</span>,</span><br><span class="line">    bins=xBins,</span><br><span class="line">    weights=<span class="string">&quot;Score&quot;</span>,</span><br><span class="line">    hue=<span class="string">&quot;Person&quot;</span>,</span><br><span class="line">    multiple=multiple,</span><br><span class="line">    edgecolor=<span class="string">&quot;.3&quot;</span>,</span><br><span class="line">    linewidth=<span class="number">0.5</span>,</span><br><span class="line">    palette=<span class="string">&quot;dark&quot;</span>,</span><br><span class="line">    alpha=<span class="number">0.6</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ax.set_xticks(<span class="built_in">range</span>(<span class="number">25</span>))</span><br><span class="line">ax.set_xticklabels(<span class="built_in">range</span>(<span class="number">25</span>))</span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Hour&quot;</span>)</span><br><span class="line">ax.set_xlim(<span class="number">0</span>, <span class="number">24</span>)</span><br><span class="line">ax.set_ylim(np.<span class="built_in">min</span>([<span class="number">0</span>, np.floor(data[<span class="string">&quot;Score&quot;</span>].<span class="built_in">min</span>() / <span class="number">0.05</span>) * <span class="number">0.05</span>]), np.ceil(data[<span class="string">&quot;Score&quot;</span>].<span class="built_in">max</span>() / <span class="number">0.05</span>) * <span class="number">0.05</span>)</span><br><span class="line">sns.move_legend(ax, loc=<span class="string">&quot;upper center&quot;</span>, bbox_to_anchor=(<span class="number">0.5</span>, <span class="number">1.2</span>), ncol=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">ax.figure.set_size_inches(<span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">ax.figure.set_dpi(<span class="number">150</span>)</span><br><span class="line">plt.show()</span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>


<p><img src="/images/QQmsganalysis_files/QQmsganalysis_70_0.png" alt="png"></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>QQ聊天记录分析 QQMsgAnalysis</p><p><a href="http://asgard-tim.github.io/2024/02/11/QQmsganalysis/">http://asgard-tim.github.io/2024/02/11/QQmsganalysis/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>明诚</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2024-02-11</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-02-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a><a class="link-muted mr-2" rel="tag" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a><a class="link-muted mr-2" rel="tag" href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/">数据处理分析</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/wechat.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/alipay.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/11/12/%E6%96%AF%E7%89%B9%E6%9E%97%E5%BE%AA%E7%8E%AF/"><span class="level-item">课题：斯特林发动机热力循环计算及分析</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.16/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread',
            appId: "4YfCkg9RY2bBZosr2CIG3MbR-gzGzoHsz",
            appKey: "yY6mlbvEevj97fBj9Ri4czpD",
            placeholder: "请多指教",
            avatar: "mm",
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: false,
            highlight: true,
            recordIP: false,
            
            
            
            enableQQ: false,
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#准备阶段"><span class="level-left"><span class="level-item">1</span><span class="level-item">准备阶段</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#引入包"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">引入包</span></span></a></li><li><a class="level is-mobile" href="#数据预处理"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">数据预处理</span></span></a></li><li><a class="level is-mobile" href="#绘图设置"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">绘图设置</span></span></a></li><li><a class="level is-mobile" href="#人名标签"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">人名标签</span></span></a></li><li><a class="level is-mobile" href="#数据读取"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">数据读取</span></span></a></li><li><a class="level is-mobile" href="#消息过滤"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">消息过滤</span></span></a></li><li><a class="level is-mobile" href="#获取文本消息"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">获取文本消息</span></span></a></li></ul></li><li><a class="level is-mobile" href="#消息频率分析"><span class="level-left"><span class="level-item">2</span><span class="level-item">消息频率分析</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#类型分析"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">类型分析</span></span></a></li><li><a class="level is-mobile" href="#消息长度分析"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">消息长度分析</span></span></a></li><li><a class="level is-mobile" href="#每日活跃分析"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">每日活跃分析</span></span></a></li><li><a class="level is-mobile" href="#每周活跃分析"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">每周活跃分析</span></span></a></li><li><a class="level is-mobile" href="#按周划分年度活跃分析"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">按周划分年度活跃分析</span></span></a></li><li><a class="level is-mobile" href="#按周划分聊天热情分析"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">按周划分聊天热情分析</span></span></a></li><li><a class="level is-mobile" href="#按日划分年度活跃分析"><span class="level-left"><span class="level-item">2.7</span><span class="level-item">按日划分年度活跃分析</span></span></a></li></ul></li><li><a class="level is-mobile" href="#词语分析"><span class="level-left"><span class="level-item">3</span><span class="level-item">词语分析</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#分词词典、停止词与去除词性"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">分词词典、停止词与去除词性</span></span></a></li><li><a class="level is-mobile" href="#分词函数"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">分词函数</span></span></a></li><li><a class="level is-mobile" href="#词云绘制"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">词云绘制</span></span></a></li><li><a class="level is-mobile" href="#高频词排行"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">高频词排行</span></span></a></li></ul></li><li><a class="level is-mobile" href="#情感分析"><span class="level-left"><span class="level-item">4</span><span class="level-item">情感分析</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#年度总体情感分布"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">年度总体情感分布</span></span></a></li><li><a class="level is-mobile" href="#按周统计平均情感指数"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">按周统计平均情感指数</span></span></a></li><li><a class="level is-mobile" href="#按周统计累计情感指数"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">按周统计累计情感指数</span></span></a></li><li><a class="level is-mobile" href="#每日平均情感分析"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">每日平均情感分析</span></span></a></li><li><a class="level is-mobile" href="#每日累计情感分析"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">每日累计情感分析</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/head.jpg" alt="明诚"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">明诚</p><p class="is-size-6 is-block">走过的路，每一步都算数。</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>江苏 苏州</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Asgard-Tim" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Asgard-Tim"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://www.weibo.com/u/6315188431"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Bilibili" href="https://space.bilibili.com/171895120"><i class="fab fa-bilibili"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://jaguarliu.me/ai-projects" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AI-Tools</span></span><span class="level-right"><span class="level-item tag">jaguarliu.me</span></span></a></li><li><a class="level is-mobile" href="https://zlibrary-east.se/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Zlibrary</span></span><span class="level-right"><span class="level-item tag">zlibrary-east.se</span></span></a></li><li><a class="level is-mobile" href="https://www.cnki.net/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CNKI</span></span><span class="level-right"><span class="level-item tag">www.cnki.net</span></span></a></li><li><a class="level is-mobile" href="https://chat.openai.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ChatGPT</span></span><span class="level-right"><span class="level-item tag">chat.openai.com</span></span></a></li><li><a class="level is-mobile" href="https://www.iodraw.com/tool/sketch" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">照片转素描</span></span><span class="level-right"><span class="level-item tag">www.iodraw.com</span></span></a></li><li><a class="level is-mobile" href="https://www.integral-calculator.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">积分计算器</span></span><span class="level-right"><span class="level-item tag">www.integral-calculator.com</span></span></a></li><li><a class="level is-mobile" href="https://cli.im/text" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">二维码生成器</span></span><span class="level-right"><span class="level-item tag">cli.im</span></span></a></li><li><a class="level is-mobile" href="https://tool.sacdr.net/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">音乐解锁</span></span><span class="level-right"><span class="level-item tag">tool.sacdr.net</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/About-XJH/"><span class="level-start"><span class="level-item">About XJH</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul><li><a class="level is-mobile" href="/categories/About-XJH/%E6%98%8E%E6%85%B5/"><span class="level-start"><span class="level-item">明慵</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/About-XJH/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"><span class="level-start"><span class="level-item">碎碎念</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul><li><a class="level is-mobile" href="/categories/About-XJH/%E7%A2%8E%E7%A2%8E%E5%BF%B5/CQU/"><span class="level-start"><span class="level-item">CQU</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">个人项目</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">动手学深度学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">课程项目</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E5%AE%9A%E9%87%8F%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%B3%95I/"><span class="level-start"><span class="level-item">定量工程设计方法I</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E5%B7%A5%E7%A8%8B%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">工程原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1/"><span class="level-start"><span class="level-item">工程设计</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/"><span class="level-start"><span class="level-item">线性代数</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/"><span class="level-start"><span class="level-item">软件设计</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2024/02/11/QQmsganalysis/"><img src="/images/QQmsganalysis_files/QQmsganalysis_42_0.png" alt="QQ聊天记录分析 QQMsgAnalysis"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-02-11T14:13:58.000Z">2024-02-11</time></p><p class="title"><a href="/2024/02/11/QQmsganalysis/">QQ聊天记录分析 QQMsgAnalysis</a></p><p class="categories"><a href="/categories/About-XJH/">About XJH</a> / <a href="/categories/About-XJH/%E6%98%8E%E6%85%B5/">明慵</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/11/12/%E6%96%AF%E7%89%B9%E6%9E%97%E5%BE%AA%E7%8E%AF/"><img src="/images/hot/022.png" alt="课题：斯特林发动机热力循环计算及分析"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-11-11T21:56:58.000Z">2023-11-12</time></p><p class="title"><a href="/2023/11/12/%E6%96%AF%E7%89%B9%E6%9E%97%E5%BE%AA%E7%8E%AF/">课题：斯特林发动机热力循环计算及分析</a></p><p class="categories"><a href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/">课程项目</a> / <a href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1/">工程设计</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/10/13/%E6%B0%94%E7%BC%B8%E6%B4%BB%E5%A1%9E%E6%8A%A5%E5%91%8A/"><img src="/images/qigang/06.png" alt="课题：发动机驱动部件的制作（气缸）"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-10-12T17:49:58.000Z">2023-10-13</time></p><p class="title"><a href="/2023/10/13/%E6%B0%94%E7%BC%B8%E6%B4%BB%E5%A1%9E%E6%8A%A5%E5%91%8A/">课题：发动机驱动部件的制作（气缸）</a></p><p class="categories"><a href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/">课程项目</a> / <a href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1/">工程设计</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/10/05/3.%E7%BA%BF%E6%80%A7%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"><img src="/images/phi.png" alt="3.线性神经网络"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-10-05T08:20:00.000Z">2023-10-05</time></p><p class="title"><a href="/2023/10/05/3.%E7%BA%BF%E6%80%A7%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/">3.线性神经网络</a></p><p class="categories"><a href="/categories/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">动手学深度学习</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/10/01/%E6%8A%A5%E5%91%8A/"><img src="/images/wall/3.jpg" alt="课题：典型建筑墙体的稳态传热分析"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-10-01T10:08:58.000Z">2023-10-01</time></p><p class="title"><a href="/2023/10/01/%E6%8A%A5%E5%91%8A/">课题：典型建筑墙体的稳态传热分析</a></p><p class="categories"><a href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/">课程项目</a> / <a href="/categories/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1/">工程设计</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">二月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">十月 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/09/"><span class="level-start"><span class="level-item">九月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">八月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">七月 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">六月 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">五月 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">三月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">一月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C51/"><span class="tag">C51</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CQU/"><span class="tag">CQU</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ChatGPT/"><span class="tag">ChatGPT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FPGA/"><span class="tag">FPGA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MATLAB/"><span class="tag">MATLAB</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/QQbot/"><span class="tag">QQbot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RANSAC/"><span class="tag">RANSAC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROS/"><span class="tag">ROS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/STM32/"><span class="tag">STM32</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ubuntu/"><span class="tag">Ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XJH/"><span class="tag">XJH</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BC%A0%E7%83%AD%E5%AD%A6/"><span class="tag">传热学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%86%9B%E8%AE%AD/"><span class="tag">军训</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="tag">动手学深度学习</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="tag">单片机</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/"><span class="tag">可视化</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB/"><span class="tag">图像识别</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="tag">学习笔记</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%9A%E9%87%8F%E5%88%86%E6%9E%90/"><span class="tag">定量分析</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E4%BD%9C%E6%96%87/"><span class="tag">小作文</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E8%BD%A6/"><span class="tag">小车</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E7%A8%8B%E7%83%AD%E5%8A%9B%E5%AD%A6/"><span class="tag">工程热力学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"><span class="tag">年终总结</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%88%86%E6%9E%90/"><span class="tag">数据处理分析</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%AF%E7%89%B9%E6%9E%97%E5%8F%91%E5%8A%A8%E6%9C%BA/"><span class="tag">斯特林发动机</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%9F%E6%97%A5/"><span class="tag">生日</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"><span class="tag">碎碎念</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/"><span class="tag">线性代数</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%88%B9/"><span class="tag">船</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/"><span class="tag">路径规划</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/title.png" alt="XJH&#039;s Secret Base" height="28"></a><p class="is-size-7"><span>&copy; 2024 明诚</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© Copyright by XJH 此心安处是吾乡。</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Asgard-Tim"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/chitose.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>
      <link rel="stylesheet" href="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.15.2/tianli_gpt.css">
      <script>
      let tianliGPT_postSelector = 'article.article .content';
      let tianliGPT_key = '0c7949b4d4956ca16024';
      </script>
      <script src="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.15.2/tianli_gpt.js"></script>